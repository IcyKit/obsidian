# Docker

- [[Работа с образами]]
- [[Работа с контейнерами]]
- [[Инструкции Dockerfile]]
- [[Разница в использовании ENTRYPOINT и CMD]]
- [[Разница в использовании ADD и COPY]]
- [[Команда для сборки]]
- [[Volume и Bind mount]]
- [[Переменные окружения]]
- [[Логи]]
- [[Порты]]

## Хитрости

- `docker stop $(docker ps -q)` - операция с `$` выполняет указанную в скобках команду, а затем подставляет результат вместо доллара. Аналог шаблонизации в JS. В данном случае остановятся все контейнеры.


---

Сначала указывается на каком порту можно будет получить доступ со своего компа, а вторым портом указывается запущенный порт внутри контейнера

`FROM` — задаёт базовый (родительский) образ.

`LABEL` — описывает метаданные. Например — сведения о том, кто создал и поддерживает образ.

`ENV` — устанавливает постоянные переменные среды.

`RUN` — выполняет команду и создаёт слой образа. Используется для установки в контейнер пакетов.

`COPY` — копирует в контейнер файлы и папки.

`ADD` — копирует файлы и папки в контейнер, может распаковывать локальные .tar-файлы.

`CMD` — описывает команду с аргументами, которую нужно выполнить когда контейнер будет запущен. Аргументы могут быть переопределены при запуске контейнера. В файле может присутствовать лишь одна инструкция CMD.

`WORKDIR` — задаёт рабочую директорию для следующей инструкции.

`ARG` — задаёт переменные для передачи Docker во время сборки образа.

`ENTRYPOINT` — предоставляет команду с аргументами для вызова во время выполнения контейнера. Аргументы не переопределяются.

`EXPOSE` — указывает на необходимость открыть порт.

`VOLUME` — создаёт точку монтирования для работы с постоянным хранилищем.

>Файл Dockerfile должен начинаться с инструкции FROM, или с инструкции ARG, за которой идёт инструкция FROM.  

Инструкция COPY представлена в нашем файле так: COPY . ./app. Она сообщает Docker о том, что нужно взять файлы и папки из локального контекста сборки и добавить их в текущую рабочую директорию образа. Если целевая директория не существует, эта инструкция её создаст.
