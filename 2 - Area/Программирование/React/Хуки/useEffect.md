# useEffect

**useEffect** - выполняет блок кода, когда указанное аргументом состояние или простая переменная изменяются.

useEffect в 90% случае работает в связке с useState

Для начала использования данного хука его нужно импортировать из React.

```tsx
import {React, useEffect} from 'react';
```

useEffect принимает в себя два аргумента:

1. Сallback функция, которая будет содержать в себе блок кода, который надо выполнять при каждом обнолении зависимости.
2. Массив, зависимости. Туда передается переменная, при обновлении которой, будет выполняться блок кода первого аргумента. Заполненность массива может эмулировать три разных функции жизненного цикла в классовых компонентах.

Если не передавать второй аргумент, то блок кода будет выполнять при каждой перерисовки компонента (при обновлении любого состояния).

Если массив зависимости пуст, то useEffect выполнит блок кода только при первом рендере страницы.

Полность хук выглядит следующим образом:

```tsx
useEffect(() => {
	Блок кода
}, [зависимость1, зависимость2])
```

## Полная структура приложения для примера

```tsx
function App() {
	const [type, setType] = useState(0);
	const [data, setData] = useState([]);

	useEffect(() => {
		fetch(`https://jsonplaceholder.typicode.com/${type}`)
			.then(res => res.json)
			.then(json => setData(json));
	}, [type])
	
	return (
		<div>
			<h1>Счетчик: {counter}</h1>
			<button onClick={() => setType('users')}>Пользователи</button>
			<button onClick={() => setType('todo')}>To Do</button>
			<button onClick={() => setType('posts')}>Посты</button>

			<pre>{JSON.stringify(data, null, 2)}</pre>
		</div>)
}
```

**Пояснение к коду**

В приложении, мы будем обновлять массив с данными, каждый раз, когда меняется состояние `type`, которое зависит от наших кнопок.

Другими словами, мы будем динамически менять отображаемый контент, взависимости от нажатого пользователем типа.

В тег `pre` мы будем выводить [JSON](https://learn.javascript.ru/json) объект

Когда пользователь нажимает на кнопку, состояние `type` меняется, переменная `type` указана в зависимостях у `useEffect`, поэтому будет выполняться блок кода и обновлять состояние `data`, а новое состояние `data` в свою очередь будет обновляться в теге `pre`